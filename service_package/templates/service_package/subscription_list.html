{% extends "base.html" %}

{% block title %}Subscriptions - SaaS Portal{% endblock %}
{% block header_title %}Subscriptions{% endblock %}
{% block nav_subscriptions_active %}active{% endblock %}

{% block content %}
<div class="content-card">
    <div class="card-title">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2>Active Subscriptions</h2>
            <a href="{% url 'package_list' %}" class="btn btn-primary">
                <i class="fas fa-plus"></i> Subscribe to Package
            </a>
        </div>
    </div>
    
    {% if subscriptions %}
    <table class="table">
        <thead>
            <tr>
                <th>Department</th>
                <th>Service Package</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for sub in subscriptions %}
            <tr>
                <td>{{ sub.department.name }}</td>
                <td>{{ sub.service_package.name }}</td>
                <td>{{ sub.start_date|date:"M d, Y" }}</td>
                <td>{{ sub.end_date|date:"M d, Y" }}</td>
                <td>
                    {% if sub.status == 'active' %}
                    <span class="badge badge-success">Active</span>
                    {% elif sub.status == 'expired' %}
                    <span class="badge badge-danger">Expired</span>
                    {% elif sub.status == 'cancelled' %}
                    <span class="badge badge-warning">Cancelled</span>
                    {% elif sub.status == 'pending' %}
                    <span class="badge badge-info">Pending</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'subscription_detail' sub.id %}" class="btn btn-primary btn-sm">
                        <i class="fas fa-eye"></i> View
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info">
        No active subscriptions found.
        <a href="{% url 'package_list' %}">Subscribe to a service package</a>
    </div>
    {% endif %}
</div>
{% endblock %}
